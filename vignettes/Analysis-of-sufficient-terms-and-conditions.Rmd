---
title: "Analysis-of-sufficient-terms-and-conditions"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Analysis-of-sufficient-terms-and-conditions}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

We load the packages needed for illustrating a robustness assessment on the level of individual sufficient terms and single conditions.
```{r load package, warning = F, message = F}
library(QCArobust)
library(formattable) # nicer html tables
```

### Analysis of sufficient terms
A *term* is any element of a solution that is in itself sufficient for the outcome. This can be a single condition or a single configuration (or conjunction), depending on the solution. The solution $A + BC \Leftrightarrow Y$ has $A$ and $BC$ as sufficient terms. The `config_robust()` function decomposes solutions into its individual terms (also if the term is a single condition; usually it is a configuration) and produces an Upset plot.


On the second, medium level of aggregation, the solutions are decomposed into their configurations. The `config_upset()` function serves this purpose. This should be used now with the config_upset_h() version of the function.
```{r, eval = F, fig.width = 7, fig.height = 5}
skaaning_conds <- conds_robust(Skaaning_table3, nsets = 200)
skaaning_conds
```

Applying the functions to Krogslund et al. (PA, 2015)
Initially on the naive model 1 (referred to as ka_model_1_sim)

```{r, eval = F}
model_1 <- read.csv("ka_model_1_sim.csv")

#conditions
kcp <- conds_upset(model_1$Configurations, nsets = 200)
conds_upset(model_1$Configurations, nsets = 162)

```


The rest of the models (titled for the sake of clarity as model_n)
model_1 (is the model presented in the chunk above).

```{r,eval=F}
model_2 <- read.csv("ka_model_1_ncut1_error.csv")
model_3 <- read.csv("model_2_ncut1_error.csv")
model_4 <- read.csv("model_2_sim.csv")
model_5 <- read.csv("model_ncut2_error.csv")
model_6 <- read.csv("model_sim.csv")
```

Conditions function
```{r, eval = F}
conds_upset(model_2$Configurations, nsets = 200)
conds_upset(model_3$Configurations, nsets = 500)
conds_upset(model_4$Configurations, nsets = 300)
conds_upset(model_5$Configurations, nsets = 400)
conds_upset(model_6$Configurations, nsets = 500)
```


Configurations applied
```{r, eval = F}
config_upset(model_2$Configurations, nsets = 300)
config_upset(model_3$Configurations, nsets = 300)
config_upset(model_4$Configurations, nsets = 400)
config_upset(model_5$Configurations, nsets = 500)
config_upset(model_6$Configurations, nsets = 400)

```



